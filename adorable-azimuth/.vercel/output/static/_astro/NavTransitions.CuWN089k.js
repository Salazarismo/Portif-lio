import{y as E}from"./hooks.module.DgMOKmnS.js";import"./preact.module.IsPPbktY.js";function L(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function y(){return E(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,f=e=>e.origin===window.location.origin,w=(e,r)=>{if(e===r)return"";const o=n=>n.split("/").filter(Boolean).length;return o(r)>o(e)?"nav-forward":"nav-back"},h=!!document.startViewTransition;window.addEventListener("popstate",()=>{t||h&&(document.documentElement.classList.add("nav-back"),document.startViewTransition(()=>{}).finished.finally(()=>{document.documentElement.classList.remove("nav-back")}))});const c=e=>{const o=e.target?.closest("a");if(!o)return;const n=o.getAttribute("href");if(!(!n||n.startsWith("http"))&&!(o.target==="_blank"||o.hasAttribute("download"))){if(n.startsWith("#")){if(e.preventDefault(),document.documentElement.classList.add("hash-scroll"),setTimeout(()=>document.documentElement.classList.remove("hash-scroll"),350),t){document.getElementById(n.slice(1))?.scrollIntoView({behavior:"smooth",block:"start"});return}const i=document.getElementById(n.slice(1));if(!i)return;const s=window.scrollY,d=i.getBoundingClientRect().top+window.scrollY-50,p=Math.abs(d-s)>500?500:300;let a=null;const l=u=>{a===null&&(a=u);const m=Math.min((u-a)/p,1),v=L(m),g=s+(d-s)*v;window.scrollTo(0,g),m<1&&requestAnimationFrame(l)};requestAnimationFrame(l);return}try{const i=new URL(n,window.location.href);if(!f(i))return;e.preventDefault();const s=w(window.location.pathname,i.pathname);if(t||!document.startViewTransition){document.documentElement.classList.add("page-transition-leave"),document.documentElement.classList.add(s),document.documentElement.classList.add("page-transition-leave-active"),setTimeout(()=>{window.location.href=i.toString()},300);return}document.documentElement.classList.add(s),document.startViewTransition(()=>{window.location.href=i.toString()}).finished.finally(()=>{document.documentElement.classList.remove("nav-forward","nav-back")})}catch{}}};return document.addEventListener("click",c,{capture:!0}),()=>document.removeEventListener("click",c,{capture:!0})},[]),null}export{y as default};
