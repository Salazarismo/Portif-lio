import{T as y,d as w,A as L,y as m}from"./hooks.module.DgMOKmnS.js";import{u as r}from"./jsxRuntime.module.BSCWCfwz.js";import"./preact.module.IsPPbktY.js";function x(d,p){try{if(new URL(d).hostname.includes("images.unsplash.com"))return d.replace(/fm=[^&]*/i,`fm=${p}`)}catch{}return""}function z({items:d}){const p=y(()=>["Todos","App Mobile","Websites","Design"],[]),[i,h]=w("Todos"),[T,v]=w({});typeof window<"u"&&window.matchMedia?.("(prefers-reduced-motion: reduce)").matches;const c=L(null),g=y(()=>{const e={Todos:d.length,"App Mobile":0,Websites:0,Design:0};for(const t of d)e[t.category]++;return e},[d]);m(()=>{const e=t=>{t.key==="Escape"&&h("Todos")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),m(()=>{const e=Array.from(document.querySelectorAll("img[data-pid]"));e.length&&v(t=>{const s={...t};for(const n of e){const l=n.getAttribute("data-pid")||"";l&&n.complete&&(s[l]=!0)}return s})},[]);const A=e=>{h(e);const t=c.current;t&&(t.setAttribute("data-state","changing"),setTimeout(()=>t.removeAttribute("data-state"),260))};return r("div",{ref:c,class:"portfolio-grid","data-active":i,style:"display:grid; gap: var(--spacing-4)",children:[r("div",{role:"toolbar","aria-label":"Filtros de portfólio",style:"display:flex; gap: var(--space-2); flex-wrap: wrap",children:p.map(e=>{const t=i===e;return r("button",{type:"button","aria-pressed":t,onClick:()=>A(e),class:"filter-btn","data-text":t?"ui-label":"ui-helper",style:`position:relative; padding: var(--space-1) var(--space-2); border-radius: var(--radius-md); border: var(--border-width-1) solid ${t?"var(--accent-1)":"var(--color-border)"}; background: ${t?"var(--surface-1)":"transparent"}; transition: all var(--duration-fast) var(--ease-standard)`,children:[e," · ",e==="Todos"?g.Todos:g[e],r("span",{"aria-hidden":"true",class:"filter-underline"})]},e)})}),r("div",{"aria-live":"polite","data-text":"ui-label",children:i==="Todos"?"Todos os projetos":`${d.filter(e=>e.category===i).length} projetos — ${i}`}),r("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-token-4",children:d.map((e,t)=>{const s=x(e.imageUrl,"avif"),n=x(e.imageUrl,"webp"),l=t<3,b=i==="Todos"?!0:e.category===i;return r("a",{class:"card-interactive portfolio-item","data-cell":!0,"data-z":"1","aria-labelledby":`${e.id}-title`,href:`/projects/${e.id}`,"data-category":e.category,"data-match":b?"true":"false",onMouseEnter:a=>{const o=c.current;if(!o)return;a.currentTarget.setAttribute("data-hovered","true"),o.setAttribute("data-hover",b?"active":"inactive");const f=o.getBoundingClientRect(),u=a.currentTarget.getBoundingClientRect(),k=u.left+u.width/2-f.left,$=u.top+u.height/2-f.top;o.style.setProperty("--hover-x",`${k}px`),o.style.setProperty("--hover-y",`${$}px`),o.setAttribute("data-hoverfx","on")},onMouseLeave:a=>{const o=c.current;o&&(a.currentTarget.removeAttribute("data-hovered"),o.removeAttribute("data-hover"),o.removeAttribute("data-hoverfx"))},style:"background: var(--surface-1); border-color: var(--color-border); box-shadow: var(--elevation-1)",children:[r("div",{style:"position:relative; overflow:hidden; border-radius: var(--radius-md)",children:[!T[e.id]&&r("div",{"aria-hidden":"true","data-skeleton":!0,style:"position:absolute; inset:0; border-radius: var(--radius-md); pointer-events:none"}),r("picture",{children:[s&&r("source",{type:"image/avif",srcSet:`${s} 1200w`,sizes:"(min-width: 1024px) 33vw, (min-width: 768px) 50vw, 100vw"}),n&&r("source",{type:"image/webp",srcSet:`${n} 1200w`,sizes:"(min-width: 1024px) 33vw, (min-width: 768px) 50vw, 100vw"}),r("img",{src:e.imageUrl,alt:e.title,width:"640",height:"360",loading:l?"eager":"lazy",decoding:"async",fetchpriority:l?"high":"auto","data-pid":e.id,onLoad:()=>v(a=>({...a,[e.id]:!0})),onError:()=>v(a=>({...a,[e.id]:!0})),style:"display:block; width:100%; height:auto; aspect-ratio: 16/9; border-radius: var(--radius-md)"})]})]}),r("div",{class:"card-body",children:[r("h3",{id:`${e.id}-title`,"data-text":"heading-lg",children:e.title}),e.caseLabel&&e.caseTarget&&r("a",{href:e.caseTarget,"data-text":"ui-label",style:"display:inline-block; padding: 2px 8px; border-radius: var(--radius-sm); background: var(--surface-2); border: var(--border-width-1) solid var(--color-border)",children:e.caseLabel}),r("p",{"data-text":"body-normal",style:"max-width: 65ch",children:e.description}),r("div",{style:"display:flex; flex-wrap:wrap; gap: var(--space-1)",children:e.technologies.map(a=>r("span",{"data-text":"ui-label",style:"border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); padding: 2px 8px; background: var(--surface-2)",children:a},a))})]})]},e.id)})})]})}export{z as default};
