---
import BaseLayout from "../../components/BaseLayout.astro";
import Divider from "../../components/ui/Divider.astro";
const { id } = Astro.params;
export const prerender = false;
---
<BaseLayout title={`Projeto ${id}`} description="">
  <div class="container" style="display:grid; gap: var(--spacing-6)">
    {id === 'p3' ? (
      <>
        <section aria-labelledby="title" style="display:grid; gap: var(--space-2)">
          <h1 id="title" data-text="heading-2xl">Habit Analyzer</h1>
          <p data-text="body-muted">Aplicativo web de acompanhamento de hábitos com analytics e relatórios.</p>
          <p data-text="ui-label">Pré‑agregação e cache reduziram em até 40% o custo de leitura de analytics em janelas grandes.</p>
          <section aria-labelledby="tldr-p3" style="display:grid; gap: var(--space-2); padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1); margin-top: var(--space-2)">
            <h2 id="tldr-p3" data-text="heading-lg">TL;DR</h2>
            <p data-text="body-normal">Engenheiro full‑stack — reduzi custo de leitura de analytics em até 40%.</p>
            <ul style="display:grid; gap: var(--space-1)">
              <li data-text="body-normal">Problema: analytics lentos em janelas grandes.</li>
              <li data-text="body-normal">Solução: pré‑agregação diária + cache versionado.</li>
              <li data-text="body-normal">Impacto: −40% latência, fluxo crítico coberto por E2E.</li>
            </ul>
            <div style="margin-top: var(--space-2)">
              <a href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer" data-text="ui-label">Código / README</a>
            </div>
            <div style="margin-top: var(--space-2)">
              <p data-text="ui-label">Como testar em 3 passos</p>
              <ul style="display:grid; gap: var(--space-1)">
                <li data-text="body-normal">Clonar repo e instalar deps (frontend e backend).</li>
                <li data-text="body-normal">Subir FastAPI + PostgreSQL (Docker) e rodar seed.</li>
                <li data-text="body-normal">Abrir frontend, login e executar fluxo “registrar hábito → visualizar analytics”.</li>
              </ul>
            </div>
          </section>
          <div style="display:flex; gap: var(--space-2); flex-wrap:wrap; align-items:center; margin-top: var(--space-2)">
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Full‑stack solo</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Next.js + FastAPI</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Testes E2E + benchmarks</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Dockerized</span>
          </div>
          <div style="margin-top: var(--space-3)">
            <picture>
              <source type="image/avif" srcset="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=avif&w=800&q=60 800w" sizes="100vw" />
              <source type="image/webp" srcset="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=webp&w=800&q=60 800w" sizes="100vw" />
              <img src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=jpg&w=800&q=80" alt="Imagem ilustrativa de programação e tecnologia" width="800" height="400" style="width:100%; height:auto; border-radius: var(--radius-md); box-shadow: var(--elevation-2)" loading="lazy" decoding="async" />
            </picture>
          </div>
          <div style="display:flex; gap: var(--space-2); flex-wrap:wrap; align-items:center; margin-top: var(--space-2)">
            <a href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer" data-text="ui-label" style="padding:6px 12px; border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md)">Código</a>
          </div>
        </section>
        <section aria-labelledby="highlights-p3" style="display:grid; gap: var(--space-2)">
          <h2 id="highlights-p3" data-text="heading-xl">Destaques</h2>
          <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(22ch, 1fr)); gap: var(--space-2)">
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Performance</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">−40% latência em analytics</li>
                <li data-text="body-normal">Cache + pré‑agregação</li>
              </ul>
            </div>
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Qualidade</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">E2E no fluxo crítico</li>
                <li data-text="body-normal">OpenAPI estável</li>
              </ul>
            </div>
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Arquitetura</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">Next.js + FastAPI</li>
                <li data-text="body-normal">PostgreSQL + Cache</li>
              </ul>
            </div>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="problem" style="display:grid; gap: var(--space-2)">
          <h2 id="problem" data-text="heading-xl">Por que isso existe?</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Sem visibilidade diária/aggregada, consistência cai e revisão é difícil.</li>
            <li data-text="body-normal">Decisões de ajuste ficam imprecisas sem métricas claras.</li>
            <li data-text="body-normal">Sem registros consolidados, análise semanal/mensal se torna onerosa.</li>
          </ul>
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap: var(--space-3); margin-top: var(--space-3)">
            <figure style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <picture>
                <img src="/images/analytics-code.svg" alt="Visual de analytics: trecho de código de resumo e cache" width="600" height="300" style="width:100%; height:auto; border-radius: var(--radius-sm)" loading="lazy" decoding="async" />
              </picture>
              <figcaption data-text="ui-helper" style="margin-top: var(--space-1)">Visual de analytics</figcaption>
            </figure>
            <figure style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <div style="height:140px; border-radius: var(--radius-sm); background: var(--surface-2); overflow:hidden">
                <div style="width:0%; height:100%; background: var(--success); animation: barGrow 1200ms var(--ease-standard) forwards"></div>
              </div>
              <style is:inline>
                @keyframes barGrow { from { width:0% } to { width:85% } }
                @media (prefers-reduced-motion: reduce) { .bar { animation: none } }
              </style>
              <figcaption data-text="ui-helper" style="margin-top: var(--space-1)">Tendência de melhoria</figcaption>
            </figure>
          </div>
        </section>
        <section aria-labelledby="highlights-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="highlights-p5" data-text="heading-xl">Destaques</h2>
          <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(22ch, 1fr)); gap: var(--space-2)">
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Eficiência</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">Tempo: 45s → 20–25s</li>
                <li data-text="body-normal">Cliques: −40–55%</li>
              </ul>
            </div>
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Acessibilidade</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">Semantics + Tooltips</li>
                <li data-text="body-normal">Fluxo único multiplataforma</li>
              </ul>
            </div>
            <div data-cell data-z="1" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
              <p data-text="ui-label">Arquitetura</p>
              <ul style="display:grid; gap: var(--space-1); margin-top: var(--space-1)">
                <li data-text="body-normal">Flutter/Dart</li>
                <li data-text="body-normal">Riverpod • go_router • Drift</li>
              </ul>
            </div>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="arch" style="display:grid; gap: var(--space-2)">
          <h2 id="arch" data-text="heading-xl">Arquitetura</h2>
          <figure aria-label="Fluxo arquitetural" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
            <svg role="img" aria-label="Next.js para FastAPI para PostgreSQL com Cache de Analytics" viewBox="0 0 800 220" width="100%" height="220">
              <rect x="40" y="60" width="160" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="120" y="95" text-anchor="middle" fill="var(--ink-1)" font-size="14">Next.js</text>

              <rect x="300" y="60" width="160" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="380" y="95" text-anchor="middle" fill="var(--ink-1)" font-size="14">FastAPI</text>

              <rect x="560" y="60" width="160" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="640" y="95" text-anchor="middle" fill="var(--ink-1)" font-size="14">PostgreSQL</text>

              <rect x="300" y="140" width="160" height="40" rx="8" fill="var(--success)" opacity="0.2"></rect>
              <text x="380" y="165" text-anchor="middle" fill="var(--ink-1)" font-size="12">Cache Analytics</text>

              <line x1="200" y1="90" x2="300" y2="90" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#arrow)"></line>
              <line x1="460" y1="90" x2="560" y2="90" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#arrow)"></line>
              <line x1="380" y1="120" x2="380" y2="140" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#arrow)"></line>
              <defs>
                <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                  <path d="M 0 0 L 10 5 L 0 10 z" fill="var(--ink-1)"></path>
                </marker>
              </defs>
            </svg>
          </figure>
        </section>
        <Divider />

        <section aria-labelledby="decisions" style="display:grid; gap: var(--space-2)">
          <h2 id="decisions" data-text="heading-xl">Decisões Técnicas‑Chave</h2>
          <div style="display:grid; gap: var(--space-2)">
            <div>
              <p data-text="ui-label">Pré‑agregação</p>
              <p data-text="body-normal">Motivo: reduzir custo de leitura em janelas grandes. Trade‑off: complexidade adicional e sincronização.</p>
            </div>
            <div>
              <p data-text="ui-label">Cache por versão</p>
              <p data-text="body-normal">Motivo: evitar dados obsoletos após updates. Trade‑off: invalidação precisa e controle de versões.</p>
            </div>
            <div>
              <p data-text="ui-label">JWT vs cookies</p>
              <p data-text="body-normal">Motivo: rapidez no MVP. Trade‑off: menor segurança que httpOnly; expiração curta adotada.</p>
            </div>
            <div>
              <p data-text="ui-label">Zustand vs Redux</p>
              <p data-text="body-normal">Motivo: menor boilerplate e simplicidade. Trade‑off: menos tooling pronto para grandes times.</p>
            </div>
            <div>
              <p data-text="ui-label">SSR opcional</p>
              <p data-text="body-normal">Motivo: flexibilidade e performance em páginas críticas. Trade‑off: complexidade de hidratação.</p>
            </div>
          </div>
          <div style="display:flex; gap: var(--space-2); flex-wrap:wrap; align-items:center; margin-top: var(--space-2)">
            <a href="https://adorable-azimuth.vercel.app/projects/p3" data-text="ui-label" style="padding:6px 12px; border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md)">Demo</a>
            <a href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer" data-text="ui-label" style="padding:6px 12px; border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md)">Código</a>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="results" style="display:grid; gap: var(--space-2)">
          <h2 id="results" data-text="heading-xl">Resultados</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Até 40% menos latência em analytics agregados.</li>
            <li data-text="body-normal">Fluxo crítico 100% coberto por E2E.</li>
            <li data-text="body-normal">Contratos de API estáveis via snapshot OpenAPI.</li>
          </ul>
          <div style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md)">
            <table role="table" style="width:100%; border-collapse: collapse">
              <thead>
                <tr>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Abordagem</th>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Janela</th>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Latência relativa</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td data-text="body-normal" style="padding: var(--space-2)">Pré‑agregação diária</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">30 dias</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">−40% vs agregação direta</td>
                </tr>
                <tr>
                  <td data-text="body-normal" style="padding: var(--space-2)">Agregação direta</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">30 dias</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">baseline</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="quality" style="display:grid; gap: var(--space-2)">
          <h2 id="quality" data-text="heading-xl">Qualidade e Engenharia</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Clean Architecture leve (domain/application/infrastructure).</li>
            <li data-text="body-normal">Segurança: Argon2, JWT, blacklist, validações rígidas.</li>
            <li data-text="body-normal">Analytics: resumos e séries com equivalência validada e testes.</li>
            <li data-text="body-normal">Frontend: estado e gráficos encapsulados; interceptores Axios.</li>
          </ul>
          <div style="display:grid; gap: var(--space-2); margin-top: var(--space-2)">
            <p data-text="ui-label">Estratégia de analytics (artefato)</p>
            <p data-text="body-normal">O trecho abaixo exemplifica cache versionado e fallback entre agregação direta e pré‑agregada.</p>
            <pre style="padding: var(--space-3); border-radius: var(--radius-md); background: var(--surface-2); overflow:auto">
<code data-text="body-normal">cache_key = (str(user_id), str(habit_id), int(days), int(habit.summary_version or 0))
use_daily = settings.USE_SUMMARY_DAILY and days <= settings.SUMMARY_WINDOW_DAYS</code>
            </pre>
            <ul style="display:grid; gap: var(--space-2)">
              <li data-text="body-normal">Cache versionado evita dados stale após updates.</li>
              <li data-text="body-normal">Pré‑agregação reduz custo em janelas longas.</li>
              <li data-text="body-normal">Fallback garante consistência funcional.</li>
              <li data-text="body-normal">Contratos equivalentes permitem testes de equivalência.</li>
            </ul>
            <div>
              <a href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer" data-text="ui-label">Implementação completa disponível no repositório</a>
            </div>
            <div style="display:grid; gap: var(--space-1); margin-top: var(--space-2)">
              <p data-text="body-muted">Observações de engenharia:</p>
              <ul style="display:grid; gap: var(--space-1)">
                <li data-text="body-normal">Função de serviço agrega cache, estratégia e formatação — aceitável em domínio; refatorável por camadas.</li>
                <li data-text="body-normal">Cache in‑memory implica instância única; invalidação em múltiplos workers exige camada externa.</li>
                <li data-text="body-normal">Legibilidade: tipagem do retorno de repositórios evita hasattr em produção.</li>
              </ul>
            </div>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="next" style="display:grid; gap: var(--space-2)">
          <h2 id="next" data-text="heading-xl">Próximos passos</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Formalizar migrations Alembic e provisionamento de pré‑agregação.</li>
            <li data-text="body-normal">Ampliar E2E para expiração/renovação de token.</li>
            <li data-text="body-normal">Automatizar snapshot OpenAPI no CI; lint/format unificados.</li>
            <li data-text="body-normal">Consolidar documentação do stack atual.</li>
          </ul>
        </section>
      </>
    ) : id === 'p5' ? (
      <>
        <section aria-labelledby="title-p5" style="display:grid; gap: var(--space-2)">
          <h1 id="title-p5" data-text="heading-2xl">Relatório Rural — UI Quick Activity Button</h1>
          <p data-text="body-muted">Aplicativo multiplataforma para gestão rural com atalhos rápidos para registrar atividades, reduzindo o tempo de lançamento em 45–60%.</p>
          <p data-text="ui-label">Para pequenos e médios produtores e técnicos agronômicos que precisam registrar atividades no campo com rapidez e consistência.</p>
          <section aria-labelledby="tldr-p5" style="display:grid; gap: var(--space-2); padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1); margin-top: var(--space-2)">
            <h2 id="tldr-p5" data-text="heading-lg">TL;DR</h2>
            <p data-text="body-normal">Full‑stack Flutter — reduzi tempo de registro em 45–60% com atalhos.</p>
            <ul style="display:grid; gap: var(--space-1)">
              <li data-text="body-normal">Problema: registros lentos em campo e baixa conectividade.</li>
              <li data-text="body-normal">Solução: QuickActionButton com Semantics + rotas nomeadas.</li>
              <li data-text="body-normal">Impacto: 45s → 20–25s; −40–55% cliques.</li>
            </ul>
            <div style="margin-top: var(--space-2)">
              <span data-text="body-muted">Software privado em produção e de propriedade empresarial — README/demonstração não disponíveis.</span>
            </div>
          </section>
          <div style="display:flex; gap: var(--space-2); flex-wrap:wrap; align-items:center; margin-top: var(--space-2)">
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Full‑stack Flutter solo</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Flutter/Dart</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Riverpod + go_router</span>
            <span data-text="ui-label" style="padding:6px 12px; border-radius: var(--radius-md); background: var(--surface-2)">Drift/SQLite • Web/Desktop/Mobile</span>
          </div>
          <div style="margin-top: var(--space-3)">
            <picture>
              <source type="image/avif" srcset="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=avif&w=800&q=60 800w" sizes="100vw" />
              <source type="image/webp" srcset="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=webp&w=800&q=60 800w" sizes="100vw" />
              <img src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=jpg&w=800&q=80" alt="UI e programação — atalhos de atividade" width="800" height="400" style="width:100%; height:auto; border-radius: var(--radius-md); box-shadow: var(--elevation-2)" loading="lazy" decoding="async" />
            </picture>
          </div>
          <div style="display:flex; gap: var(--space-2); flex-wrap:wrap; align-items:center; margin-top: var(--space-2)">
            <span data-text="body-muted">Este software é privado em produção e pertence a uma empresa; demo e código não estão disponíveis.</span>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="problem-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="problem-p5" data-text="heading-xl">Por que isso existe?</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Quem: produtores e equipes técnicas com baixo tempo e conectividade intermitente.</li>
            <li data-text="body-normal">Por que importa: registros lentos e inconsistentes geram divergências em custos, planejamentos e conformidade.</li>
            <li data-text="body-normal">Se não resolver: perda de dados de campo, retrabalho em auditorias e decisões com base em registros incompletos.</li>
          </ul>
        </section>
        <Divider />

        <section aria-labelledby="context-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="context-p5" data-text="heading-xl">Contexto e Restrições</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Técnicas: Android/iOS/Web/Windows; offline‑first; performance em dispositivos modestos; a11y e semântica; persistência local confiável; navegação estável.</li>
            <li data-text="body-normal">Negócio: minimizar atrito no registro, reduzir tempo de onboarding e manter consistência entre módulos.</li>
            <li data-text="body-normal">Cenário: evitar dependências pesadas e priorizar UI acessível e rápida; rotas nomeadas e fluxos curtos para “Nova atividade”.</li>
          </ul>
        </section>
        <Divider />

        <section aria-labelledby="arch-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="arch-p5" data-text="heading-xl">Arquitetura</h2>
          <figure aria-label="Camadas e fluxos" style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md); background: var(--surface-1)">
            <svg role="img" aria-label="Flutter camadas core/features; Riverpod; go_router; Drift/SQLite; IndexedDB no Web" viewBox="0 0 800 260" width="100%" height="260">
              <rect x="40" y="40" width="200" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="140" y="75" text-anchor="middle" fill="var(--ink-1)" font-size="14">Flutter Core</text>

              <rect x="300" y="40" width="200" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="400" y="75" text-anchor="middle" fill="var(--ink-1)" font-size="14">Features</text>

              <rect x="560" y="40" width="200" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="660" y="75" text-anchor="middle" fill="var(--ink-1)" font-size="14">Riverpod</text>

              <rect x="300" y="120" width="200" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="400" y="155" text-anchor="middle" fill="var(--ink-1)" font-size="14">go_router</text>

              <rect x="560" y="120" width="200" height="60" rx="8" fill="var(--surface-2)"></rect>
              <text x="660" y="155" text-anchor="middle" fill="var(--ink-1)" font-size="14">Drift/SQLite</text>

              <rect x="560" y="200" width="200" height="40" rx="8" fill="var(--success)" opacity="0.2"></rect>
              <text x="660" y="225" text-anchor="middle" fill="var(--ink-1)" font-size="12">IndexedDB (Web)</text>

              <line x1="240" y1="70" x2="300" y2="70" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#a2)"></line>
              <line x1="500" y1="70" x2="560" y2="70" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#a2)"></line>
              <line x1="500" y1="150" x2="560" y2="150" stroke="var(--ink-1)" stroke-width="2" marker-end="url(#a2)"></line>
              <defs>
                <marker id="a2" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                  <path d="M 0 0 L 10 5 L 0 10 z" fill="var(--ink-1)"></path>
                </marker>
              </defs>
            </svg>
          </figure>
        </section>
        <Divider />

        <section aria-labelledby="decisions-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="decisions-p5" data-text="heading-xl">Decisões Técnicas‑Chave</h2>
          <div style="display:grid; gap: var(--space-2)">
            <div>
              <p data-text="ui-label">Flutter multiplataforma</p>
              <p data-text="body-normal">Motivo: UI nativa e forte ecossistema. Trade‑off: tamanho do binário e atenção a performance.</p>
            </div>
            <div>
              <p data-text="ui-label">Riverpod</p>
              <p data-text="body-normal">Motivo: previsibilidade e composição. Trade‑off: curva inicial de providers e refatoração.</p>
            </div>
            <div>
              <p data-text="ui-label">go_router</p>
              <p data-text="body-normal">Motivo: rotas declarativas e deep‑linking. Trade‑off: estrutura nominal exige disciplina.</p>
            </div>
            <div>
              <p data-text="ui-label">Drift/SQLite</p>
              <p data-text="body-normal">Motivo: offline confiável e tipagem forte; IndexedDB no Web. Trade‑off: sincronização posterior.</p>
            </div>
            <div>
              <p data-text="ui-label">QuickActionButton com Semantics</p>
              <p data-text="body-normal">Motivo: acessibilidade e reuso; props mínimas e Tooltips. Trade‑off: padronização de rótulos/atalhos.</p>
            </div>
          </div>
          <div style="margin-top: var(--space-2)"><span data-text="body-muted">Opções de demonstração e repositório não disponíveis por confidencialidade e propriedade empresarial.</span></div>
        </section>
        <Divider />

        <section aria-labelledby="results-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="results-p5" data-text="heading-xl">Resultados</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Tempo de registro “Nova atividade”: de ~45s para ~20–25s.</li>
            <li data-text="body-normal">Redução de cliques por ação: −40–55% em atalhos do dashboard.</li>
            <li data-text="body-normal">Render do dashboard estável após const/keys; Semantics consistentes.</li>
          </ul>
          <div style="padding: var(--space-3); border: var(--border-width-1) solid var(--color-border); border-radius: var(--radius-md)">
            <table role="table" style="width:100%; border-collapse: collapse">
              <thead>
                <tr>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Fluxo</th>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Tempo</th>
                  <th scope="col" data-text="ui-label" style="text-align:left; padding: var(--space-2)">Cliques</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td data-text="body-normal" style="padding: var(--space-2)">Nova atividade (atalho)</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">20–25s</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">−40–55%</td>
                </tr>
                <tr>
                  <td data-text="body-normal" style="padding: var(--space-2)">Fluxo antigo</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">~45s</td>
                  <td data-text="body-normal" style="padding: var(--space-2)">baseline</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="quality-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="quality-p5" data-text="heading-xl">Qualidade e Engenharia</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Camadas core/features; Riverpod providers; rotas declarativas; widgets com Semantics.</li>
            <li data-text="body-normal">Persistência local confiável (Drift/SQLite, IndexedDB no Web).</li>
            <li data-text="body-normal">Testes de widget para a11y e interação do botão de ação rápida.</li>
          </ul>
          <div style="display:grid; gap: var(--space-2); margin-top: var(--space-2)">
            <p data-text="ui-label">Artefato de UI/roteamento</p>
            <pre style="padding: var(--space-3); border-radius: var(--radius-md); background: var(--surface-2); overflow:auto">
<code data-text="body-normal">Semantics(
  label: 'Atalho: Nova atividade',
  button: true,
  child: Tooltip(
    message: 'Nova atividade',
    child: QuickActionButton(onPressed: () =&gt; context.goNamed('nova_atividade'))
  ),
)</code>
            </pre>
            <ul style="display:grid; gap: var(--space-2)">
              <li data-text="body-normal">Semantics/Tooltip garantem a11y e reconhecibilidade.</li>
              <li data-text="body-normal">Rotas nomeadas com go_router facilitam deep‑linking e previsibilidade.</li>
              <li data-text="body-normal">const/keys reduzem re‑renders no dashboard.</li>
            </ul>
          </div>
        </section>
        <Divider />

        <section aria-labelledby="next-p5" style="display:grid; gap: var(--space-2)">
          <h2 id="next-p5" data-text="heading-xl">Próximos passos</h2>
          <ul style="display:grid; gap: var(--space-2)">
            <li data-text="body-normal">Atalhos contextuais (baseados em última atividade/local).</li>
            <li data-text="body-normal">Telemetria leve para medir tempo/cliques por atalho e otimizar UX.</li>
            <li data-text="body-normal">Fila de sincronização offline com resolução de conflitos.</li>
            <li data-text="body-normal">Melhorias de a11y com foco/outline e leitores no Web/Desktop.</li>
            <li data-text="body-normal">Testes de integração para fluxos completos de registro a partir do dashboard.</li>
          </ul>
        </section>
      </>
    ) : (
      <section style="display:grid; gap: var(--space-2)">
        <h1 data-text="heading-2xl">Projeto {id}</h1>
        <p data-text="body-muted">Conteúdo não encontrado. Volte ao <a href="/#portfolio">Portfólio</a>.</p>
      </section>
    )}
  </div>
</BaseLayout>
