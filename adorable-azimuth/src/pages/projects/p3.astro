---
import BaseLayout from "../../components/BaseLayout.astro";
import Divider from "../../components/ui/Divider.astro";
import { AspectRatioImage } from "@/components/ui/AspectRatioImage";
export const prerender = false;
---
<BaseLayout title="Habit Analyzer — Victor de Alcântara Bueno" description="Aplicativo web de acompanhamento de hábitos com analytics e relatórios.">
  <div class="container">
    <section aria-labelledby="hero-p3">
      <h1 id="hero-p3" data-text="heading-2xl">Habit Analyzer</h1>
      <p data-text="body-muted">Aplicativo web de acompanhamento de hábitos com API e dashboard.</p>
      <p data-text="ui-label">Entrega: API REST (FastAPI) + frontend (Next.js) com autenticação e gráficos.</p>
      <p style="margin-top: var(--space-1)"><span class="nl-badge" data-variant="secondary" data-ladder="Custo">Custo</span></p>
      <div class="nl-hero-actions" style="margin-top: var(--space-2)">
        <a class="nl-btn" href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer">Repo</a>
        <a class="nl-btn" href="https://wa.me/5548984586949" target="_blank" rel="noopener noreferrer">Contato</a>
      </div>
      <div style="margin-top: var(--space-3)">
        <AspectRatioImage
          src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fm=jpg&w=1200&q=80"
          alt="Imagem ilustrativa de programação e tecnologia"
          ratio={16 / 9}
          loading="lazy"
          decoding="async"
        />
      </div>
    </section>
    <Divider />
    <section aria-labelledby="tldr-p3">
      <h2 id="tldr-p3" data-text="heading-xl">TL;DR (1 minuto)</h2>
      <div style="display:grid; gap: var(--space-1); margin-top: var(--space-2)">
        <p data-text="body-normal"><strong>Problema:</strong> registrar hábitos e acompanhar evolução tende a virar planilha/notas, com pouco insight e baixa consistência.</p>
        <p data-text="body-normal"><strong>Solução:</strong> app com backend FastAPI (JWT) e frontend Next.js/TypeScript com fluxo de registro e gráficos por hábito.</p>
        <p data-text="body-normal"><strong>Resultado:</strong> MVP funcional com Docker Compose, documentação via Swagger/OpenAPI e testes (pytest + Playwright E2E).</p>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="snapshot-p3">
      <h2 id="snapshot-p3" data-text="heading-xl">Snapshot (contexto rápido)</h2>
      <div class="grid-12 gap-token-4" style="margin-top: var(--space-2)">
        <div style="grid-column: span 4">
          <div data-text="ui-label">Papel / escopo / tempo</div>
          <p data-text="body-normal">Arquitetura + Full‑stack. Ano: 2025.</p>
        </div>
        <div style="grid-column: span 4">
          <div data-text="ui-label">Escala (o mínimo)</div>
          <p data-text="body-normal">Múltiplos hábitos por usuário, registros diários e histórico suficiente para gráficos e tendências.</p>
        </div>
        <div style="grid-column: span 4">
          <div data-text="ui-label">Restrições (o mínimo)</div>
          <p data-text="body-normal">Dados consistentes (datas/valores), autenticação e evolução segura do schema com migrações.</p>
        </div>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="problem-impact-p3">
      <h2 id="problem-impact-p3" data-text="heading-xl">Problema &amp; Impacto</h2>
      <ul class="case-psr">
        <li data-text="body-normal"><strong>Sintomas:</strong> registro manual disperso e pouca visibilidade de consistência/progresso.</li>
        <li data-text="body-normal"><strong>Causa:</strong> dados sem modelo único e sem uma visualização agregada do histórico por hábito.</li>
        <li data-text="body-normal"><strong>Impacto:</strong> baixa aderência ao acompanhamento e decisões piores sobre rotina por falta de sinal.</li>
      </ul>
    </section>
    <Divider />
    <section aria-labelledby="approach-p3">
      <h2 id="approach-p3" data-text="heading-xl">Abordagem</h2>
      <p data-text="body-normal">Como resolve (3 passos):</p>
      <ol class="case-psr">
        <li data-text="body-normal"><strong>Modelar</strong> hábitos e registros (domínio) e persistir no Postgres.</li>
        <li data-text="body-normal"><strong>Expor</strong> uma API REST com FastAPI e autenticação JWT.</li>
        <li data-text="body-normal"><strong>Visualizar</strong> no dashboard web (Next.js) com fluxo de registro e gráficos por hábito.</li>
      </ol>
      <div style="display:grid; gap: var(--space-3); margin-top: var(--space-3)">
        <figure>
          <AspectRatioImage
            src="/images/analytics-code.svg"
            alt="Visual de analytics: trecho de código de resumo e cache"
            ratio={2 / 1}
            loading="lazy"
            decoding="async"
          />
          <figcaption data-text="ui-helper" style="margin-top: var(--space-1)">Snapshot: UI de gráfico consumindo um resumo da API.</figcaption>
        </figure>
        <figure>
          <pre class="case-diagram" data-text="body-normal">Ação → POST /api/v1/records (registra)
Persistência → Postgres + migrações
GET /api/v1/records/habit/'habit_id'/summary → série temporal
Frontend → Chart.js renderiza progresso</pre>
          <figcaption data-text="ui-helper" style="margin-top: var(--space-1)">Diagrama: do registro ao resumo que alimenta os gráficos.</figcaption>
        </figure>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="reliability-p3">
      <h2 id="reliability-p3" data-text="heading-xl">Confiabilidade</h2>
      <div style="display:grid; gap: var(--space-2); margin-top: var(--space-2)">
        <p data-text="body-normal"><strong>Riscos:</strong> dados inconsistentes (datas/valores), regressão de autenticação e divergência entre resumo e série temporal.</p>
        <p data-text="body-normal"><strong>Garantias:</strong> validação com Pydantic, migrações com Alembic e testes (unitários + E2E com Playwright no fluxo crítico).</p>
        <p data-text="body-normal"><strong>Evidência:</strong> README, OpenAPI snapshot e suíte de testes no repositório.</p>
      </div>
      <pre style="margin-top: var(--space-2)">
<code data-text="body-normal">encoded_jwt = jwt.encode(&#123;**data, "exp": expire&#125;, settings.JWT_SECRET, algorithm=settings.JWT_ALGORITHM)
payload = jwt.decode(token, settings.JWT_SECRET, algorithms=[settings.JWT_ALGORITHM])</code>
      </pre>
      <div style="margin-top: var(--space-2)">
        <a href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer" data-text="ui-label">Ver repo</a>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="next-p3">
      <h2 id="next-p3" data-text="heading-xl">Extensões / Próximos passos</h2>
      <ul class="case-psr">
        <li data-text="body-normal">Adicionar metas, streaks e lembretes para reforçar aderência.</li>
        <li data-text="body-normal">Expandir relatórios (semanal/mensal) e filtros por hábito.</li>
        <li data-text="body-normal">Observabilidade: métricas de API e erros para evolução segura.</li>
      </ul>
    </section>
    <Divider />
    <section aria-labelledby="conversion-p3">
      <h2 id="conversion-p3" data-text="heading-xl">Se você tem esse problema</h2>
      <p data-text="body-normal">Se você precisa de um MVP de acompanhamento de hábitos com API e dashboard (auth + gráficos), eu desenho a arquitetura, implemento o fluxo crítico e valido com testes.</p>
      <div class="case-conversion">
        <a class="case-cta" href="https://wa.me/5548984586949" target="_blank" rel="noopener noreferrer">Falar no WhatsApp</a>
        <a class="case-cta-secondary" href="https://github.com/Salazarismo/habit_analyzer" target="_blank" rel="noopener noreferrer">Repo</a>
        <a class="case-cta-secondary" href="/#projects">Voltar</a>
        <a class="case-cta-secondary" href="/projects/p5">Próximo case</a>
        <span data-text="ui-helper">Disponível para projetos em 2026.</span>
      </div>
    </section>
  </div>
</BaseLayout>
