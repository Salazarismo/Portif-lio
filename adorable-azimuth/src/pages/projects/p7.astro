---
import BaseLayout from "../../components/BaseLayout.astro";
import Divider from "../../components/ui/Divider.astro";
import { AspectRatioImage } from "@/components/ui/AspectRatioImage";
export const prerender = false;
---
<BaseLayout title="Plataforma Nexus — Victor de Alcântara Bueno" description="Venda de ingressos pelo WhatsApp com check‑in offline e painel admin.">
  <div class="container">
    <section aria-labelledby="hero-p7">
      <h1 id="hero-p7" data-text="heading-2xl">Plataforma Nexus</h1>
      <p data-text="body-muted">Plataforma de ingressos com vendas via WhatsApp, pagamentos integrados e operação de check‑in resiliente em eventos.</p>
      <p data-text="ui-label">KPI principal: check‑in operável sem internet na portaria (offline-first + sincronização).</p>
      <p style="margin-top: var(--space-1)"><span class="nl-badge" data-variant="secondary" data-ladder="Risco">Risco</span></p>
      <div class="nl-hero-actions" style="margin-top: var(--space-2)">
        <a class="nl-btn" href="mailto:victor.de.alcantara.bueno@gmail.com?subject=Solicita%C3%A7%C3%A3o%20de%20repo%20%2F%20README%20(Plataforma%20Ingressos%20WhatsApp)" rel="noopener noreferrer">Repo</a>
        <a class="nl-btn" href="https://wa.me/5548984586949" target="_blank" rel="noopener noreferrer">Contato</a>
      </div>
      <div style="margin-top: var(--space-3)">
        <figure>
          <AspectRatioImage
            src="/images/98f5ae2c-0f91-4fda-9e44-1fd81a607417.png"
            alt="Fluxo de compra no WhatsApp e painel admin"
            ratio={16 / 3}
            loading="lazy"
            decoding="async"
          />
          <figcaption data-text="ui-helper" style="margin-top: var(--space-1)">Snapshot: print real do fluxo e visão administrativa.</figcaption>
        </figure>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="tldr-p7">
      <h2 id="tldr-p7" data-text="heading-xl">TL;DR (1 minuto)</h2>
      <div style="display:grid; gap: var(--space-1); margin-top: var(--space-2)">
        <p data-text="body-normal"><strong>Problema:</strong> venda e atendimento dependentes de canais fragmentados e check‑in que falha quando a rede cai na portaria.</p>
        <p data-text="body-normal"><strong>Solução:</strong> fluxo de venda via WhatsApp + backend multi-tenant com integrações (WhatsApp Cloud API e Mercado Pago) + check‑in offline-first com fila local e sincronização.</p>
        <p data-text="body-normal"><strong>Resultado:</strong> operação de portaria sem internet com sincronização segura; menos incidência operacional em dia de evento e mais previsibilidade no fluxo de venda.</p>
      </div>
      <div style="margin-top: var(--space-2)">
        <span data-text="body-muted">Monorepo com backend, dashboard/admin e infraestrutura local via Docker Compose (detalhes no README).</span>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="snapshot-p7">
      <h2 id="snapshot-p7" data-text="heading-xl">Snapshot (contexto rápido)</h2>
      <div class="grid-12 gap-token-4" style="margin-top: var(--space-2)">
        <div style="grid-column: span 4">
          <div data-text="ui-label">Papel / escopo / tempo</div>
          <p data-text="body-normal">Full‑stack. Arquitetura + backend (NestJS) + dashboards (React/Next).</p>
        </div>
        <div style="grid-column: span 4">
          <div data-text="ui-label">Escala (o mínimo)</div>
          <p data-text="body-normal">Operação em eventos e múltiplas organizações (multi-tenant), com necessidade de baixa fricção e consistência operacional.</p>
        </div>
        <div style="grid-column: span 4">
          <div data-text="ui-label">Restrições (o mínimo)</div>
          <p data-text="body-normal">Portaria pode ficar sem internet; integrações externas exigem idempotência e rastreabilidade para evitar duplicidade/erros.</p>
        </div>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="problem-impact-p7">
      <h2 id="problem-impact-p7" data-text="heading-xl">Problema &amp; Impacto</h2>
      <ul class="case-psr">
        <li data-text="body-normal"><strong>Sintomas:</strong> venda/atendimento com dependência de integrações e portaria travando quando o check‑in exige rede.</li>
        <li data-text="body-normal"><strong>Causa:</strong> falta de um fluxo único de venda e ausência de um mecanismo offline-first com fila e retry controlado para a operação crítica.</li>
        <li data-text="body-normal"><strong>Impacto:</strong> risco operacional alto na portaria, divergências por reprocessamento e aumento de suporte em dia de evento.</li>
      </ul>
    </section>
    <Divider />
    <section aria-labelledby="approach-p7">
      <h2 id="approach-p7" data-text="heading-xl">Abordagem</h2>
      <p data-text="body-normal">Como resolve (3 passos):</p>
      <ol class="case-psr">
        <li data-text="body-normal"><strong>Vendas via WhatsApp</strong> integrando WhatsApp Cloud API e orquestração server-side por organização (multi-tenant).</li>
        <li data-text="body-normal"><strong>Pagamentos</strong> via Mercado Pago com rotas administrativas para operação e suporte.</li>
        <li data-text="body-normal"><strong>Operação offline-first</strong> (check‑in e POS) com fila local (IndexedDB) e sincronização em lote para reduzir rajadas.</li>
      </ol>
      <div class="case-stack" style="margin-top: var(--space-2)">
        <div data-text="ui-label">Stack</div>
        <div class="case-chips">
          <span class="case-chip">NestJS + PostgreSQL</span>
          <span class="case-chip">WhatsApp Cloud API</span>
          <span class="case-chip">Mercado Pago</span>
          <span class="case-chip">PWA + fila offline</span>
        </div>
      </div>
    </section>
    <Divider />
    <section aria-labelledby="reliability-p7">
      <h2 id="reliability-p7" data-text="heading-xl">Confiabilidade</h2>
      <div style="display:grid; gap: var(--space-2); margin-top: var(--space-2)">
        <p data-text="body-normal"><strong>Riscos:</strong> duplicidade em reenvio (offline/retry), rajadas na reconexão, inconsistência operacional entre dispositivos.</p>
        <p data-text="body-normal"><strong>Garantias:</strong> fila local (IndexedDB) com retry e sincronização em lote para POS; idempotência por externalId para não duplicar vendas.</p>
        <p data-text="body-normal"><strong>Evidência:</strong> snippet real do mecanismo de fila/sync (IndexedDB + batch sync do POS).</p>
      </div>
      <pre style="margin-top: var(--space-2)">
<code data-text="body-normal">await db.add('syncQueue', &#123;
  url,
  method,
  body,
  timestamp: Date.now(),
  retryCount: 0
&#125;);
// offline POS: /admin/pos/orders -&gt; /admin/pos/sync (batch)
await fetch(syncUrl, &#123; method: 'POST', body: JSON.stringify(&#123; orders &#125;) &#125;);</code>
      </pre>
    </section>
    <Divider />
    <section aria-labelledby="next-p7">
      <h2 id="next-p7" data-text="heading-xl">Extensões / Próximos passos</h2>
      <ul class="case-psr">
        <li data-text="body-normal">Expandir observabilidade de fila (pendentes, idade, taxa de sincronização) para antecipar falhas em campo.</li>
        <li data-text="body-normal">Consolidar relatórios operacionais (check‑in, POS e reconciliação) para reduzir suporte e acelerar auditoria.</li>
        <li data-text="body-normal">Aprimorar métricas do funil (WhatsApp → pagamento → emissão/validação) para identificar gargalos por etapa.</li>
      </ul>
    </section>
    <Divider />
    <section aria-labelledby="conversion-p7">
      <h2 id="conversion-p7" data-text="heading-xl">Se você tem esse problema</h2>
      <p data-text="body-normal">Se você precisa vender com baixa fricção e operar em campo sem depender de internet (portaria, eventos, PDV), eu desenho um fluxo offline-first com idempotência, sync em lote e trilha de auditoria.</p>
      <div class="case-conversion">
        <a class="case-cta" href="https://wa.me/5548984586949" target="_blank" rel="noopener noreferrer">Falar no WhatsApp</a>
        <a class="case-cta-secondary" href="mailto:victor.de.alcantara.bueno@gmail.com?subject=Solicita%C3%A7%C3%A3o%20de%20repo%20%2F%20README%20(Plataforma%20Ingressos%20WhatsApp)" rel="noopener noreferrer">Repo</a>
        <a class="case-cta-secondary" href="/#projects">Voltar</a>
        <a class="case-cta-secondary" href="/projects/p3">Próximo case</a>
        <span data-text="ui-helper">Disponível para projetos em 2026.</span>
      </div>
    </section>
  </div>
</BaseLayout>
